<navbar></navbar>

<div class="row container-fluid">

    <div class="col-md-2">
        <img class="singleBookImage" src="{{ cover_url }}">
    </div>
    

    <div class="col-md-6">
        <h1>{{ book.title }}</h1>
        <h2>by <a ng-repeat="author in book.authors" href="">{{ author.full_name }}</a></h2>
        <p ng-repeat="collection in book.collections"> Book {{ collection.book_collection.place_in_series }} of {{ collection.total_books }} in {{ collection.name }}</p>
        <form id="radio-list">
            <div class="btn-group" data-toggle="buttons">
                <book-type ng-repeat="bookType in book.book_types"></book-type>
            </div>
        </form>
        <h3>{{ book.genre }}</h3>
        <h3>{{ book.publisher.name }}</h3>
        <button ng-click="addToCart()">Add to cart</button>

        <!-- <pre>{{ book | json}}</pre> -->

    </div>

    <div class="col-md-4">
        <div class="cart-sidebar">
            <h3>My shopping cart:</h3>
            <span ng-hide="cartItems.length">No items currently in cart</span>
            <ul class="list-unstyled">
                <li class="cart-item" ng-repeat="item in cartItems">
                    <span class="bold-title">{{item.book.title}}</span>
                    <br>
                    <span>{{item.type}}</span>
                    <br>
                    <span>{{item.line_item.quantity}} x </span>
                    <span>${{item.line_item.unit_price}}</span>
                    <span class="float-right">${{(item.line_item.unit_price * item.line_item.quantity).toFixed(2)}}</span>
                    <br>
                </li>
                <li>
                    <br>
                    <span>Subtotal:</span>
                    <span class="float-right">${{subTotal}}</span>
                </li>
                <li>
                    <span>Tax (8%):</span>
                    <span class="float-right">${{tax}}</span>
                </li>
                <li>
                    <br>
                    <span>Total:</span>
                    <span class="float-right">${{total}}</span>
                </li>
            </ul>
            
            <button ng-show="cartItems.length" ng-click="checkout()">Proceed to checkout</button>
        </div>
    </div>
</div>  